var gt=Object.defineProperty;var yt=(e,a,t)=>a in e?gt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var I=(e,a,t)=>(yt(e,typeof a!="symbol"?a+"":a,t),t);import{i as me,s as re,b as ge,a5 as ee,r as k,p as U,y as Le,d as h,e as We,a as pt,g as ht,a6 as kt,N as Z,l as te,t as x,m as y,O as Ve,Q as Fe,U as Te,n as Ie,x as _t,q as Pe,a7 as wt,P as Ct,V as Q,h as Be,A as Ee,J as St,v as bt,a8 as xt,a9 as se,aa as Vt,C as j,D as C,ab as N,F as Y,ac as ve,E as W,G as It,ad as Pt,ae as At,af as Ue,ag as je,ah as Ge,a4 as fe,H as E,ai as Re,j as Dt,f as Mt,aj as J}from"./index-c22e6166.js";import{r as q,O as z,M as ie,e as Xe,m as Ye,b as Lt,a as He,R as Tt,d as Bt,c as Et,u as Ke,g as Ot,V as Oe}from"./VAvatar-82a651ff.js";import{m as ce,a as ye,u as de,i as Se,M as $t,j as Nt,b as qe,p as ze,c as Ze,d as Je,f as Qe,q as et,g as tt,h as nt,k as $e,o as at,e as Wt}from"./VIcon-574dfa01.js";import{u as Ft}from"./ssrBoot-a2ef5948.js";var lt=(e=>(e.WEB="WEB",e.DNS="DNS",e.SMTP="SMTP",e))(lt||{});class Ce{static networksList(){return q(z,{method:"GET",url:"/api/networks/"})}static networksCreate(a){return q(z,{method:"POST",url:"/api/networks/",body:a,mediaType:"application/json"})}static networksRetrieve(a){return q(z,{method:"GET",url:"/api/networks/{id}/",path:{id:a}})}static networksUpdate(a,t){return q(z,{method:"PUT",url:"/api/networks/{id}/",path:{id:a},body:t,mediaType:"application/json"})}static networksPartialUpdate(a,t){return q(z,{method:"PATCH",url:"/api/networks/{id}/",path:{id:a},body:t,mediaType:"application/json"})}static networksDestroy(a){return q(z,{method:"DELETE",url:"/api/networks/{id}/",path:{id:a}})}}const Ut=lt;class R{constructor(a){I(this,"refdata");I(this,"x",0);I(this,"y",0);I(this,"highlighted",!1);this.refdata=a}async destroy(){await ie.machinesDestroy(this.refdata.id)}async attachNetwork(a,t){await ie.machinesAttachNetworkCreate(this.refdata.id,{network_id:a.refdata.id,ipaddr:t})}async detachNetwork(a){await ie.machinesDettachNetworkCreate(this.refdata.id,{network_id:a.refdata.id})}static async create(a,t,n){const l=await ie.machinesCreate({id:"",container_id:"",owner:0,machine_type:a,name:t,description:n});return new R(l)}static async list(){return(await ie.machinesList()).map(t=>new R(t))}}class ot{constructor(a,t){I(this,"networkId");I(this,"machineId");this.networkId=a,this.machineId=t}}class X{constructor(a){I(this,"refdata");I(this,"name","");I(this,"description","");I(this,"x",0);I(this,"y",0);I(this,"highlighted",!1);this.refdata=a}getEdges(){return this.refdata.machines.map(a=>new ot(this.refdata.id,a))}async destroy(){await Ce.networksDestroy(this.refdata.id)}static async create(a,t,n){const l=await Ce.networksCreate({id:"",network_id:"",gateway:"",owner:0,machines:[],network:a,name:t,description:n});return new X(l)}static async list(){return(await Ce.networksList()).map(t=>new X(t))}}const be=Symbol.for("vuetify:list");function st(){const e=me(be,{hasPrepend:re(!1),updateHasPrepend:()=>null}),a={hasPrepend:re(!1),updateHasPrepend:t=>{t&&(a.hasPrepend.value=t)}};return ge(be,a),e}function it(){return me(be,null)}const jt={open:e=>{let{id:a,value:t,opened:n,parents:l}=e;if(t){const o=new Set;o.add(a);let i=l.get(a);for(;i!=null;)o.add(i),i=l.get(i);return o}else return n.delete(a),n},select:()=>null},rt={open:e=>{let{id:a,value:t,opened:n,parents:l}=e;if(t){let o=l.get(a);for(n.add(a);o!=null&&o!==a;)n.add(o),o=l.get(o);return n}else n.delete(a);return n},select:()=>null},Gt={open:rt.open,select:e=>{let{id:a,value:t,opened:n,parents:l}=e;if(!t)return n;const o=[];let i=l.get(a);for(;i!=null;)o.push(i),i=l.get(i);return new Set(o)}},Ae=e=>{const a={select:t=>{let{id:n,value:l,selected:o}=t;if(n=ee(n),e&&!l){const i=Array.from(o.entries()).reduce((s,_)=>{let[m,g]=_;return g==="on"?[...s,m]:s},[]);if(i.length===1&&i[0]===n)return o}return o.set(n,l?"on":"off"),o},in:(t,n,l)=>{let o=new Map;for(const i of t||[])o=a.select({id:i,value:!0,selected:new Map(o),children:n,parents:l});return o},out:t=>{const n=[];for(const[l,o]of t.entries())o==="on"&&n.push(l);return n}};return a},ut=e=>{const a=Ae(e);return{select:n=>{let{selected:l,id:o,...i}=n;o=ee(o);const s=l.has(o)?new Map([[o,l.get(o)]]):new Map;return a.select({...i,id:o,selected:s})},in:(n,l,o)=>{let i=new Map;return n!=null&&n.length&&(i=a.in(n.slice(0,1),l,o)),i},out:(n,l,o)=>a.out(n,l,o)}},Rt=e=>{const a=Ae(e);return{select:n=>{let{id:l,selected:o,children:i,...s}=n;return l=ee(l),i.has(l)?o:a.select({id:l,selected:o,children:i,...s})},in:a.in,out:a.out}},Xt=e=>{const a=ut(e);return{select:n=>{let{id:l,selected:o,children:i,...s}=n;return l=ee(l),i.has(l)?o:a.select({id:l,selected:o,children:i,...s})},in:a.in,out:a.out}},Yt=e=>{const a={select:t=>{let{id:n,value:l,selected:o,children:i,parents:s}=t;n=ee(n);const _=new Map(o),m=[n];for(;m.length;){const r=m.shift();o.set(r,l?"on":"off"),i.has(r)&&m.push(...i.get(r))}let g=s.get(n);for(;g;){const r=i.get(g),u=r.every(d=>o.get(d)==="on"),f=r.every(d=>!o.has(d)||o.get(d)==="off");o.set(g,u?"on":f?"off":"indeterminate"),g=s.get(g)}return e&&!l&&Array.from(o.entries()).reduce((u,f)=>{let[d,p]=f;return p==="on"?[...u,d]:u},[]).length===0?_:o},in:(t,n,l)=>{let o=new Map;for(const i of t||[])o=a.select({id:i,value:!0,selected:new Map(o),children:n,parents:l});return o},out:(t,n)=>{const l=[];for(const[o,i]of t.entries())i==="on"&&!n.has(o)&&l.push(o);return l}};return a},ue=Symbol.for("vuetify:nested"),ct={id:re(),root:{register:()=>null,unregister:()=>null,parents:k(new Map),children:k(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:k(new Set),selected:k(new Map),selectedValues:k([])}},Ht=U({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),Kt=e=>{let a=!1;const t=k(new Map),n=k(new Map),l=Le(e,"opened",e.opened,r=>new Set(r),r=>[...r.values()]),o=h(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return Xt(e.mandatory);case"leaf":return Rt(e.mandatory);case"independent":return Ae(e.mandatory);case"single-independent":return ut(e.mandatory);case"classic":default:return Yt(e.mandatory)}}),i=h(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Gt;case"single":return jt;case"multiple":default:return rt}}),s=Le(e,"selected",e.selected,r=>o.value.in(r,t.value,n.value),r=>o.value.out(r,t.value,n.value));We(()=>{a=!0});function _(r){const u=[];let f=r;for(;f!=null;)u.unshift(f),f=n.value.get(f);return u}const m=pt("nested"),g={id:re(),root:{opened:l,selected:s,selectedValues:h(()=>{const r=[];for(const[u,f]of s.value.entries())f==="on"&&r.push(u);return r}),register:(r,u,f)=>{u&&r!==u&&n.value.set(r,u),f&&t.value.set(r,[]),u!=null&&t.value.set(u,[...t.value.get(u)||[],r])},unregister:r=>{if(a)return;t.value.delete(r);const u=n.value.get(r);if(u){const f=t.value.get(u)??[];t.value.set(u,f.filter(d=>d!==r))}n.value.delete(r),l.value.delete(r)},open:(r,u,f)=>{m.emit("click:open",{id:r,value:u,path:_(r),event:f});const d=i.value.open({id:r,value:u,opened:new Set(l.value),children:t.value,parents:n.value,event:f});d&&(l.value=d)},openOnSelect:(r,u,f)=>{const d=i.value.select({id:r,value:u,selected:new Map(s.value),opened:new Set(l.value),children:t.value,parents:n.value,event:f});d&&(l.value=d)},select:(r,u,f)=>{m.emit("click:select",{id:r,value:u,path:_(r),event:f});const d=o.value.select({id:r,value:u,selected:new Map(s.value),children:t.value,parents:n.value,event:f});d&&(s.value=d),g.root.openOnSelect(r,u,f)},children:t,parents:n}};return ge(ue,g),g.root},dt=(e,a)=>{const t=me(ue,ct),n=Symbol(ht()),l=h(()=>e.value!==void 0?e.value:n),o={...t,id:l,open:(i,s)=>t.root.open(l.value,i,s),openOnSelect:(i,s)=>t.root.openOnSelect(l.value,i,s),isOpen:h(()=>t.root.opened.value.has(l.value)),parent:h(()=>t.root.parents.value.get(l.value)),select:(i,s)=>t.root.select(l.value,i,s),isSelected:h(()=>t.root.selected.value.get(ee(l.value))==="on"),isIndeterminate:h(()=>t.root.selected.value.get(l.value)==="indeterminate"),isLeaf:h(()=>!t.root.children.value.get(l.value)),isGroupActivator:t.isGroupActivator};return!t.isGroupActivator&&t.root.register(l.value,t.id.value,a),We(()=>{!t.isGroupActivator&&t.root.unregister(l.value)}),a&&ge(ue,o),o},qt=()=>{const e=me(ue,ct);ge(ue,{...e,isGroupActivator:!0})},zt=kt({name:"VListGroupActivator",setup(e,a){let{slots:t}=a;return qt(),()=>{var n;return(n=t.default)==null?void 0:n.call(t)}}}),Zt=U({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Z,default:"$collapse"},expandIcon:{type:Z,default:"$expand"},prependIcon:Z,appendIcon:Z,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ce(),...ye()},"VListGroup"),Ne=te()({name:"VListGroup",props:Zt(),setup(e,a){let{slots:t}=a;const{isOpen:n,open:l,id:o}=dt(x(e,"value"),!0),i=h(()=>`v-list-group--id-${String(o.value)}`),s=it(),{isBooted:_}=Ft();function m(f){l(!n.value,f)}const g=h(()=>({onClick:m,class:"v-list-group__header",id:i.value})),r=h(()=>n.value?e.collapseIcon:e.expandIcon),u=h(()=>({VListItem:{active:n.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&r.value,appendIcon:e.appendIcon||!e.subgroup&&r.value,title:e.title,value:e.value}}));return de(()=>y(e.tag,{class:["v-list-group",{"v-list-group--prepend":s==null?void 0:s.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":n.value},e.class],style:e.style},{default:()=>[t.activator&&y(Se,{defaults:u.value},{default:()=>[y(zt,null,{default:()=>[t.activator({props:g.value,isOpen:n.value})]})]}),y($t,{transition:{component:Nt},disabled:!_.value},{default:()=>{var f;return[Ve(y("div",{class:"v-list-group__items",role:"group","aria-labelledby":i.value},[(f=t.default)==null?void 0:f.call(t)]),[[Fe,n.value]])]}})]})),{}}});const Jt=Xe("v-list-item-subtitle"),vt=Xe("v-list-item-title"),Qt=U({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Z,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Z,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:Te(),onClickOnce:Te(),...qe(),...ce(),...Ye(),...ze(),...Ze(),...Je(),...Lt(),...ye(),...Ie(),...He({variant:"text"})},"VListItem"),xe=te()({name:"VListItem",directives:{Ripple:Tt},props:Qt(),emits:{click:e=>!0},setup(e,a){let{attrs:t,slots:n,emit:l}=a;const o=Bt(e,t),i=h(()=>e.value===void 0?o.href.value:e.value),{select:s,isSelected:_,isIndeterminate:m,isGroupActivator:g,root:r,parent:u,openOnSelect:f}=dt(i,!1),d=it(),p=h(()=>{var c;return e.active!==!1&&(e.active||((c=o.isActive)==null?void 0:c.value)||_.value)}),A=h(()=>e.link!==!1&&o.isLink.value),D=h(()=>!e.disabled&&e.link!==!1&&(e.link||o.isClickable.value||e.value!=null&&!!d)),F=h(()=>e.rounded||e.nav),O=h(()=>e.color??e.activeColor),ne=h(()=>({color:p.value?O.value??e.baseColor:e.baseColor,variant:e.variant}));_t(()=>{var c;return(c=o.isActive)==null?void 0:c.value},c=>{c&&u.value!=null&&r.open(u.value,!0),c&&f(c)},{immediate:!0});const{themeClasses:ae}=Pe(e),{borderClasses:le}=Qe(e),{colorClasses:H,colorStyles:M,variantClasses:S}=Et(ne),{densityClasses:G}=Ke(e),{dimensionStyles:pe}=et(e),{elevationClasses:he}=tt(e),{roundedClasses:ke}=nt(F),_e=h(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),K=h(()=>({isActive:p.value,select:s,isSelected:_.value,isIndeterminate:m.value}));function oe(c){var b;l("click",c),!(g||!D.value)&&((b=o.navigate)==null||b.call(o,c),e.value!=null&&s(!_.value,c))}function v(c){(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),oe(c))}return de(()=>{const c=A.value?"a":e.tag,b=n.title||e.title!=null,$=n.subtitle||e.subtitle!=null,w=!!(e.appendAvatar||e.appendIcon),V=!!(w||n.append),B=!!(e.prependAvatar||e.prependIcon),we=!!(B||n.prepend);return d==null||d.updateHasPrepend(we),e.activeColor&&wt("active-color",["color","base-color"]),Ve(y(c,{class:["v-list-item",{"v-list-item--active":p.value,"v-list-item--disabled":e.disabled,"v-list-item--link":D.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!we&&(d==null?void 0:d.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&p.value},ae.value,le.value,H.value,G.value,he.value,_e.value,ke.value,S.value,e.class],style:[M.value,pe.value,e.style],href:o.href.value,tabindex:D.value?d?-2:0:void 0,onClick:oe,onKeydown:D.value&&!A.value&&v},{default:()=>{var Me;return[Ot(D.value||p.value,"v-list-item"),we&&y("div",{key:"prepend",class:"v-list-item__prepend"},[n.prepend?y(Se,{key:"prepend-defaults",disabled:!B,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var L;return[(L=n.prepend)==null?void 0:L.call(n,K.value)]}}):y(Q,null,[e.prependAvatar&&y(Oe,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&y($e,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),y("div",{class:"v-list-item__spacer"},null)]),y("div",{class:"v-list-item__content","data-no-activator":""},[b&&y(vt,{key:"title"},{default:()=>{var L;return[((L=n.title)==null?void 0:L.call(n,{title:e.title}))??e.title]}}),$&&y(Jt,{key:"subtitle"},{default:()=>{var L;return[((L=n.subtitle)==null?void 0:L.call(n,{subtitle:e.subtitle}))??e.subtitle]}}),(Me=n.default)==null?void 0:Me.call(n,K.value)]),V&&y("div",{key:"append",class:"v-list-item__append"},[n.append?y(Se,{key:"append-defaults",disabled:!w,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var L;return[(L=n.append)==null?void 0:L.call(n,K.value)]}}):y(Q,null,[e.appendIcon&&y($e,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&y(Oe,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),y("div",{class:"v-list-item__spacer"},null)])]}}),[[Ct("ripple"),D.value&&e.ripple]])}),{}}}),en=U({color:String,inset:Boolean,sticky:Boolean,title:String,...ce(),...ye()},"VListSubheader"),tn=te()({name:"VListSubheader",props:en(),setup(e,a){let{slots:t}=a;const{textColorClasses:n,textColorStyles:l}=at(x(e,"color"));return de(()=>{const o=!!(t.default||e.title);return y(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},n.value,e.class],style:[{textColorStyles:l},e.style]},{default:()=>{var i;return[o&&y("div",{class:"v-list-subheader__text"},[((i=t.default)==null?void 0:i.call(t))??e.title])]}})}),{}}});const nn=U({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...ce(),...Ie()},"VDivider"),an=te()({name:"VDivider",props:nn(),setup(e,a){let{attrs:t}=a;const{themeClasses:n}=Pe(e),{textColorClasses:l,textColorStyles:o}=at(x(e,"color")),i=h(()=>{const s={};return e.length&&(s[e.vertical?"maxHeight":"maxWidth"]=Be(e.length)),e.thickness&&(s[e.vertical?"borderRightWidth":"borderTopWidth"]=Be(e.thickness)),s});return de(()=>y("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},n.value,l.value,e.class],style:[i.value,o.value,e.style],"aria-orientation":!t.role||t.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${t.role||"separator"}`},null)),{}}}),ln=U({items:Array,returnObject:Boolean},"VListChildren"),ft=te()({name:"VListChildren",props:ln(),setup(e,a){let{slots:t}=a;return st(),()=>{var n,l;return((n=t.default)==null?void 0:n.call(t))??((l=e.items)==null?void 0:l.map(o=>{var u,f;let{children:i,props:s,type:_,raw:m}=o;if(_==="divider")return((u=t.divider)==null?void 0:u.call(t,{props:s}))??y(an,s,null);if(_==="subheader")return((f=t.subheader)==null?void 0:f.call(t,{props:s}))??y(tn,s,null);const g={subtitle:t.subtitle?d=>{var p;return(p=t.subtitle)==null?void 0:p.call(t,{...d,item:m})}:void 0,prepend:t.prepend?d=>{var p;return(p=t.prepend)==null?void 0:p.call(t,{...d,item:m})}:void 0,append:t.append?d=>{var p;return(p=t.append)==null?void 0:p.call(t,{...d,item:m})}:void 0,title:t.title?d=>{var p;return(p=t.title)==null?void 0:p.call(t,{...d,item:m})}:void 0},r=Ne.filterProps(s);return i?y(Ne,Ee({value:s==null?void 0:s.value},r),{activator:d=>{let{props:p}=d;const A={...s,...p,value:e.returnObject?m:s.value};return t.header?t.header({props:A}):y(xe,A,g)},default:()=>y(ft,{items:i},t)}):t.item?t.item({props:s}):y(xe,Ee(s,{value:e.returnObject?m:s.value}),g)}))}}}),on=U({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:St}},"list-items");function sn(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function rn(e,a){const t=se(a,e.itemType,"item"),n=sn(a)?a:se(a,e.itemTitle),l=se(a,e.itemValue,void 0),o=se(a,e.itemChildren),i=e.itemProps===!0?Vt(a,["children"]):se(a,e.itemProps),s={title:n,value:l,...i};return{type:t,title:s.title,value:s.value,props:s,children:t==="item"&&o?mt(e,o):void 0,raw:a}}function mt(e,a){const t=[];for(const n of a)t.push(rn(e,n));return t}function un(e){return{items:h(()=>mt(e,e.items))}}const cn=U({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,...Ht({selectStrategy:"single-leaf",openStrategy:"list"}),...qe(),...ce(),...Ye(),...ze(),...Ze(),itemType:{type:String,default:"type"},...on(),...Je(),...ye(),...Ie(),...He({variant:"text"})},"VList"),dn=te()({name:"VList",props:cn(),emits:{"update:selected":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,a){let{slots:t}=a;const{items:n}=un(e),{themeClasses:l}=Pe(e),{backgroundColorClasses:o,backgroundColorStyles:i}=Wt(x(e,"bgColor")),{borderClasses:s}=Qe(e),{densityClasses:_}=Ke(e),{dimensionStyles:m}=et(e),{elevationClasses:g}=tt(e),{roundedClasses:r}=nt(e),{open:u,select:f}=Kt(e),d=h(()=>e.lines?`v-list--${e.lines}-line`:void 0),p=x(e,"activeColor"),A=x(e,"baseColor"),D=x(e,"color");st(),bt({VListGroup:{activeColor:p,baseColor:A,color:D},VListItem:{activeClass:x(e,"activeClass"),activeColor:p,baseColor:A,color:D,density:x(e,"density"),disabled:x(e,"disabled"),lines:x(e,"lines"),nav:x(e,"nav"),slim:x(e,"slim"),variant:x(e,"variant")}});const F=re(!1),O=k();function ne(S){F.value=!0}function ae(S){F.value=!1}function le(S){var G;!F.value&&!(S.relatedTarget&&((G=O.value)!=null&&G.contains(S.relatedTarget)))&&M()}function H(S){if(O.value){if(S.key==="ArrowDown")M("next");else if(S.key==="ArrowUp")M("prev");else if(S.key==="Home")M("first");else if(S.key==="End")M("last");else return;S.preventDefault()}}function M(S){if(O.value)return xt(O.value,S)}return de(()=>y(e.tag,{ref:O,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav},l.value,o.value,s.value,_.value,g.value,d.value,r.value,e.class],style:[i.value,m.value,e.style],tabindex:e.disabled||F.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:ne,onFocusout:ae,onFocus:le,onKeydown:H},{default:()=>[y(ft,{items:n.value,returnObject:e.returnObject},t)]})),{open:u,select:f,focus:M}}}),vn=j({__name:"ContextMenu",props:{menu:{}},setup(e,{expose:a}){const t=k(!1),n=k(0),l=k(0),o=k(),i=k(null),s=e,_=u=>{i.value.focus(),t.value=!1,setTimeout(s.menu[u].action,0),g()},m=u=>{u.preventDefault(),n.value=u.clientX,l.value=u.clientY,t.value=!0,o.value.tabIndex=-1,setTimeout(()=>o.value.focus(),0)},g=()=>{i.value.focus()},r=h(()=>t);return a({show:m,isShowing:r}),(u,f)=>Ve((C(),N("div",{ref_key:"contextMenuDiv",ref:o,style:At([{position:"absolute"},{left:n.value+"px",top:l.value+"px"}]),onFocus:f[0]||(f[0]=d=>i.value=d.relatedTarget),onKeydown:f[1]||(f[1]=Ue(d=>{t.value=!1,g()},["escape"]))},[y(dn,{id:"list"},{default:Y(()=>[(C(!0),N(Q,null,ve(s.menu,(d,p)=>(C(),W(xe,{key:p,onClick:A=>_(p)},{default:Y(()=>[y(vt,null,{default:Y(()=>[It(Pt(d.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],36)),[[Fe,t.value]])}});const De=(e,a)=>{const t=e.__vccOpts||e;for(const[n,l]of a)t[n]=l;return t},fn=De(vn,[["__scopeId","data-v-21b2160f"]]),T=50,mn=j({__name:"ComponentMachine",props:{modelValue:{required:!0},modelModifiers:{}},emits:je(["selected","unselected"],["update:modelValue"]),setup(e,{expose:a,emit:t}){const n=Ge(e,"modelValue"),l=h(()=>({x:n.value.x,y:n.value.y,width:T,height:T,draggable:!0})),o=fe(h(()=>n.value.x+T/2)),i=fe(h(()=>n.value.y+T/2)),s=m=>{n.value.x=m.target.x(),n.value.y=m.target.y()};return a({getConnectionPos:(m,g)=>[o.value,i.value],centerX:o,centerY:i,model:n}),(m,g)=>{const r=E("v-rect"),u=E("v-text"),f=E("v-circle"),d=E("v-group");return C(),W(d,{config:l.value,onMouseenter:g[0]||(g[0]=p=>m.$emit("selected")),onMouseleave:g[1]||(g[1]=p=>m.$emit("unselected")),onDragmove:s},{default:Y(()=>[y(r,{config:{width:T,height:T,fill:"black"}},null,8,["config"]),y(u,{config:{x:0,y:T+10,width:T,text:n.value.refdata.name,align:"center"}},null,8,["config"]),n.value.highlighted?(C(),W(f,{key:0,config:{x:T/2,y:T/2,radius:T/1.5,stroke:"#00000",opacity:.5,strokeWidth:3}},null,8,["config"])):Re("",!0)]),_:1},8,["config"])}}}),P=50,gn=j({__name:"ComponentNetwork",props:{modelValue:{required:!0},modelModifiers:{}},emits:je(["selected","unselected"],["update:modelValue"]),setup(e,{expose:a,emit:t}){const n=Ge(e,"modelValue"),l=h(()=>({x:n.value.x,y:n.value.y,width:P,height:P,draggable:!0})),o=fe(h(()=>n.value.x+P/2)),i=fe(h(()=>n.value.y+P/2)),s=m=>{n.value.x=m.target.x(),n.value.y=m.target.y()};return a({getConnectionPos:(m,g)=>{const r=m-n.value.x,u=g-n.value.y,f=Math.sqrt(r*r+u*u),d=P/2;return[o.value+r/f*d,i.value+u/f*d]},centerX:o,centerY:i,model:n}),(m,g)=>{const r=E("v-circle"),u=E("v-text"),f=E("v-group");return C(),W(f,{config:l.value,onMouseenter:g[0]||(g[0]=d=>m.$emit("selected")),onMouseleave:g[1]||(g[1]=d=>m.$emit("unselected")),onDragmove:s},{default:Y(()=>[y(r,{config:{x:P/2,y:P/2,radius:P/2,stroke:"black",strokeWidth:3}},null,8,["config"]),y(u,{config:{x:-50+P/2,y:P+10,width:100,text:n.value.refdata.name,align:"center"}},null,8,["config"]),n.value.highlighted?(C(),W(r,{key:0,config:{x:P/2,y:P/2,radius:P/1.5,stroke:"#00000",opacity:.5,strokeWidth:3}},null,8,["config"])):Re("",!0)]),_:1},8,["config"])}}}),yn=j({__name:"ComponentNetworkEdge",props:{machine:{},network:{},mouseX:{},mouseY:{}},setup(e){const a=e,t=h(()=>{const n=a.mouseX,l=a.mouseY,o=a.machine?[a.machine.centerX,a.machine.centerY]:[n,l],i=a.network?[a.network.centerX,a.network.centerY]:[n,l];return[...a.machine?a.machine.getConnectionPos(i[0],i[1]):[n,l],...a.network?a.network.getConnectionPos(o[0],o[1]):[n,l]]});return(n,l)=>{const o=E("v-line");return C(),W(o,{config:{x:0,y:0,stroke:"black",strokeWidth:3,points:t.value,tension:1}},null,8,["config"])}}}),pn=j({__name:"WorkspaceView",setup(e){var K,oe;const a=k(),t=k(),n=k(Array()),l=k(Array()),o=k(Array()),i=k(1),s=k(),_=new Map,m=k(new Array),g=k(new Array),r=k(new Array),u=k(),f=k(0),d=k(0),p=k({width:(K=a.value)==null?void 0:K.clientWidth,height:(oe=a.value)==null?void 0:oe.clientHeight});Dt(()=>{_e();const v=new ResizeObserver(()=>{var c,b;p.value.height=(c=a.value)==null?void 0:c.clientHeight,p.value.width=(b=a.value)==null?void 0:b.clientWidth,console.log(p.value)});a.value&&v.observe(a.value)});function A(v){const c=_.get(v)??1;return _.set(v,c+1),c}const D=v=>{v.preventDefault()},F=v=>{var b;v.preventDefault();const c=(b=v.dataTransfer)==null?void 0:b.getData("text/plain");if(c)if(c=="NETWORK")X.create("192.168."+i.value+".0/24","Network "+i.value).then($=>{$.x=v.clientX-25,$.y=v.clientY-25,g.value.push(k($)),i.value++});else{const $=Ut.WEB;R.create($,"WEB Server "+A("WEB")).then(w=>{w.x=v.clientX-25,w.y=v.clientY-25,m.value.push(k(w))})}},O=v=>{var c;v.preventDefault(),s.value!=null&&((c=t.value)==null||c.show(v))},ne=v=>{f.value=v.offsetX,d.value=v.offsetY},ae=()=>{if(s.value){u.value&&G();const v=k(new ot);s.value instanceof R?v.value.machineId=s.value.refdata.id:s.value instanceof X&&(v.value.networkId=s.value.refdata.id),r.value.push(v),u.value=v.value,s.value.highlighted=!1,s.value=void 0}},le=()=>{s.value&&(s.value instanceof R?(m.value=m.value.filter(v=>{var c;return v.value.refdata.id!=((c=s.value)==null?void 0:c.refdata.id)}),r.value=r.value.filter(v=>{var c;return v.value.machineId!=((c=s.value)==null?void 0:c.refdata.id)}),s.value.destroy()):s.value instanceof X&&(g.value=g.value.filter(v=>{var c;return v.value.refdata.id!=((c=s.value)==null?void 0:c.refdata.id)}),r.value=r.value.filter(v=>{var c;return v.value.networkId!=((c=s.value)==null?void 0:c.refdata.id)}),s.value.destroy()))},H=v=>{t.value==null||t.value.isShowing.value||(s.value=v,s.value.highlighted=!0)},M=v=>{t.value==null||t.value.isShowing.value||(v.highlighted=!1,s.value=void 0)},S=v=>{v.button==0&&u.value&&s.value&&(u.value.machineId&&s.value instanceof X?(u.value.networkId=s.value.refdata.id,u.value=void 0):u.value.networkId&&s.value instanceof R&&(u.value.machineId=s.value.refdata.id,u.value=void 0))},G=()=>{u.value&&(r.value=r.value.filter(v=>{var c,b;return v.value.machineId!=((c=u.value)==null?void 0:c.machineId)||v.value.networkId!=((b=u.value)==null?void 0:b.networkId)}),u.value=void 0)},pe=v=>n.value.find(c=>c.model.refdata.id==v),he=v=>l.value.find(c=>c.model.refdata.id==v),ke=Mt([{label:"ネットワークを接続",action:ae},{label:"削除",action:le}]),_e=()=>{var v;(v=a.value)==null||v.focus()};return(v,c)=>{const b=E("v-layer"),$=E("v-stage");return C(),N("div",{id:"workspace-view",ref_key:"view",ref:a,tabindex:"1",onDragover:D,onDrop:F,onKeydown:Ue(G,["escape"])},[y($,{config:p.value,onContextmenu:c[0]||(c[0]=w=>O(w.evt)),onMousemove:c[1]||(c[1]=w=>ne(w.evt)),onClick:c[2]||(c[2]=w=>S(w.evt))},{default:Y(()=>[y(b,{ref:"layer"},{default:Y(()=>[(C(!0),N(Q,null,ve(r.value,(w,V)=>(C(),W(yn,{key:V,ref_for:!0,ref_key:"networkEdgeComponents",ref:o,network:he(w.value.networkId),machine:pe(w.value.machineId),"mouse-x":f.value,"mouse-y":d.value},null,8,["network","machine","mouse-x","mouse-y"]))),128)),(C(!0),N(Q,null,ve(m.value,(w,V)=>(C(),W(mn,{key:w.value.refdata.id,ref_for:!0,ref_key:"machineComponents",ref:n,modelValue:m.value[V].value,"onUpdate:modelValue":B=>m.value[V].value=B,onSelected:B=>H(m.value[V].value),onUnselected:B=>M(m.value[V].value)},null,8,["modelValue","onUpdate:modelValue","onSelected","onUnselected"]))),128)),(C(!0),N(Q,null,ve(g.value,(w,V)=>(C(),W(gn,{key:w.value.refdata.id,ref_for:!0,ref_key:"networkComponents",ref:l,modelValue:g.value[V].value,"onUpdate:modelValue":B=>g.value[V].value=B,onSelected:B=>H(g.value[V].value),onUnselected:B=>M(g.value[V].value)},null,8,["modelValue","onUpdate:modelValue","onSelected","onUnselected"]))),128))]),_:1},512)]),_:1},8,["config"]),y(fn,{ref_key:"contextMenu",ref:t,menu:ke},null,8,["menu"])],544)}}});const hn={id:"tab"},kn=j({__name:"WorkspaceComponentsTab",setup(e){const a=n=>{var i;const l=n.target,o=l==null?void 0:l.dataset.type;o&&l&&((i=n.dataTransfer)==null||i.setData("text/plain",o),l.style.opacity="0.5")},t=n=>{const l=n.target;l&&(l.style.opacity="1.0")};return(n,l)=>(C(),N("div",hn,[J("div",{id:"server",draggable:"true","data-type":"HTML",onDragstart:a,onDragend:t},null,32),J("div",{id:"server",draggable:"true","data-type":"DNS",onDragstart:a,onDragend:t},null,32),J("div",{id:"server",draggable:"true","data-type":"FILE",onDragstart:a,onDragend:t},null,32),J("div",{id:"network",draggable:"true","data-type":"NETWORK",onDragstart:a,onDragend:t},null,32)]))}});const _n=De(kn,[["__scopeId","data-v-e670e784"]]),wn={id:"editor"},Cn=j({__name:"WorkspaceEditor",setup(e){return(a,t)=>(C(),N("div",wn,[J("div",null,[y(pn)]),J("div",null,[y(_n)])]))}});const Sn=De(Cn,[["__scopeId","data-v-d01891c0"]]),bn={id:"workspace"},Dn=j({__name:"Workspace",setup(e){return(a,t)=>(C(),N("div",bn,[y(Sn)]))}});export{Dn as default};
