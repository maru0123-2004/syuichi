var pt=Object.defineProperty;var gt=(e,n,t)=>n in e?pt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var D=(e,n,t)=>(gt(e,typeof n!="symbol"?n+"":n,t),t);import{i as fe,s as re,b as pe,a5 as ee,r as k,p as G,y as Le,d as h,e as We,a as yt,g as ht,a6 as kt,N as Z,l as te,t as x,m as g,O as Ve,Q as je,U as Me,n as Ie,x as _t,q as Pe,a7 as wt,P as Ct,V as Q,h as Ee,A as Oe,J as bt,v as St,a8 as xt,a9 as se,aa as Vt,C as R,D as C,ab as j,F as K,ac as ve,E as F,G as It,ad as Pt,ae as Dt,af as Fe,ag as Ue,ah as Ge,a4 as me,H as $,ai as Re,j as At,f as Tt,aj as J}from"./index-ab3b81d6.js";import{r as V,O as I,e as Xe,m as Ye,b as Lt,a as He,R as Mt,d as Et,c as Ot,u as Ke,g as Bt,V as Be}from"./VAvatar-c0cd2d86.js";import{m as ce,a as ge,u as de,i as be,M as $t,j as Nt,b as qe,p as ze,c as Ze,d as Je,f as Qe,q as et,g as tt,h as nt,k as $e,o as at,e as Wt}from"./VIcon-84e54f37.js";import{u as jt}from"./ssrBoot-741b75f5.js";var lt=(e=>(e.WEB="WEB",e.DNS="DNS",e.SMTP="SMTP",e))(lt||{});class ie{static machinesList(){return V(I,{method:"GET",url:"/api/machines/"})}static machinesCreate(n){return V(I,{method:"POST",url:"/api/machines/",body:n,mediaType:"application/json"})}static machinesRetrieve(n){return V(I,{method:"GET",url:"/api/machines/{id}/",path:{id:n}})}static machinesUpdate(n,t){return V(I,{method:"PUT",url:"/api/machines/{id}/",path:{id:n},body:t,mediaType:"application/json"})}static machinesPartialUpdate(n,t){return V(I,{method:"PATCH",url:"/api/machines/{id}/",path:{id:n},body:t,mediaType:"application/json"})}static machinesDestroy(n){return V(I,{method:"DELETE",url:"/api/machines/{id}/",path:{id:n}})}static machinesAttachNetworkCreate(n,t){return V(I,{method:"POST",url:"/api/machines/{id}/attach_network/",path:{id:n},body:t,mediaType:"application/json"})}static machinesDettachNetworkCreate(n,t){return V(I,{method:"POST",url:"/api/machines/{id}/dettach_network/",path:{id:n},body:t,mediaType:"application/json"})}}class Ce{static networksList(){return V(I,{method:"GET",url:"/api/networks/"})}static networksCreate(n){return V(I,{method:"POST",url:"/api/networks/",body:n,mediaType:"application/json"})}static networksRetrieve(n){return V(I,{method:"GET",url:"/api/networks/{id}/",path:{id:n}})}static networksUpdate(n,t){return V(I,{method:"PUT",url:"/api/networks/{id}/",path:{id:n},body:t,mediaType:"application/json"})}static networksPartialUpdate(n,t){return V(I,{method:"PATCH",url:"/api/networks/{id}/",path:{id:n},body:t,mediaType:"application/json"})}static networksDestroy(n){return V(I,{method:"DELETE",url:"/api/networks/{id}/",path:{id:n}})}}const Ft=lt;class Y{constructor(n){D(this,"refdata");D(this,"x",0);D(this,"y",0);D(this,"highlighted",!1);this.refdata=n}async destroy(){await ie.machinesDestroy(this.refdata.id)}async attachNetwork(n,t){await ie.machinesAttachNetworkCreate(this.refdata.id,{network_id:n.refdata.id,ipaddr:t})}async detachNetwork(n){await ie.machinesDettachNetworkCreate(this.refdata.id,{network_id:n.refdata.id})}static async create(n,t,a){const l=await ie.machinesCreate({id:"",container_id:"",owner:0,machine_type:n,name:t,description:a});return new Y(l)}static async list(){return(await ie.machinesList()).map(t=>new Y(t))}}class ot{constructor(n,t){D(this,"networkId");D(this,"machineId");this.networkId=n,this.machineId=t}}class H{constructor(n){D(this,"refdata");D(this,"name","");D(this,"description","");D(this,"x",0);D(this,"y",0);D(this,"highlighted",!1);this.refdata=n}getEdges(){return this.refdata.machines.map(n=>new ot(this.refdata.id,n))}async destroy(){await Ce.networksDestroy(this.refdata.id)}static async create(n,t,a){const l=await Ce.networksCreate({id:"",network_id:"",gateway:"",owner:0,machines:[],network:n,name:t,description:a});return new H(l)}static async list(){return(await Ce.networksList()).map(t=>new H(t))}}const Se=Symbol.for("vuetify:list");function st(){const e=fe(Se,{hasPrepend:re(!1),updateHasPrepend:()=>null}),n={hasPrepend:re(!1),updateHasPrepend:t=>{t&&(n.hasPrepend.value=t)}};return pe(Se,n),e}function it(){return fe(Se,null)}const Ut={open:e=>{let{id:n,value:t,opened:a,parents:l}=e;if(t){const o=new Set;o.add(n);let i=l.get(n);for(;i!=null;)o.add(i),i=l.get(i);return o}else return a.delete(n),a},select:()=>null},rt={open:e=>{let{id:n,value:t,opened:a,parents:l}=e;if(t){let o=l.get(n);for(a.add(n);o!=null&&o!==n;)a.add(o),o=l.get(o);return a}else a.delete(n);return a},select:()=>null},Gt={open:rt.open,select:e=>{let{id:n,value:t,opened:a,parents:l}=e;if(!t)return a;const o=[];let i=l.get(n);for(;i!=null;)o.push(i),i=l.get(i);return new Set(o)}},De=e=>{const n={select:t=>{let{id:a,value:l,selected:o}=t;if(a=ee(a),e&&!l){const i=Array.from(o.entries()).reduce((s,_)=>{let[f,p]=_;return p==="on"?[...s,f]:s},[]);if(i.length===1&&i[0]===a)return o}return o.set(a,l?"on":"off"),o},in:(t,a,l)=>{let o=new Map;for(const i of t||[])o=n.select({id:i,value:!0,selected:new Map(o),children:a,parents:l});return o},out:t=>{const a=[];for(const[l,o]of t.entries())o==="on"&&a.push(l);return a}};return n},ut=e=>{const n=De(e);return{select:a=>{let{selected:l,id:o,...i}=a;o=ee(o);const s=l.has(o)?new Map([[o,l.get(o)]]):new Map;return n.select({...i,id:o,selected:s})},in:(a,l,o)=>{let i=new Map;return a!=null&&a.length&&(i=n.in(a.slice(0,1),l,o)),i},out:(a,l,o)=>n.out(a,l,o)}},Rt=e=>{const n=De(e);return{select:a=>{let{id:l,selected:o,children:i,...s}=a;return l=ee(l),i.has(l)?o:n.select({id:l,selected:o,children:i,...s})},in:n.in,out:n.out}},Xt=e=>{const n=ut(e);return{select:a=>{let{id:l,selected:o,children:i,...s}=a;return l=ee(l),i.has(l)?o:n.select({id:l,selected:o,children:i,...s})},in:n.in,out:n.out}},Yt=e=>{const n={select:t=>{let{id:a,value:l,selected:o,children:i,parents:s}=t;a=ee(a);const _=new Map(o),f=[a];for(;f.length;){const r=f.shift();o.set(r,l?"on":"off"),i.has(r)&&f.push(...i.get(r))}let p=s.get(a);for(;p;){const r=i.get(p),u=r.every(d=>o.get(d)==="on"),m=r.every(d=>!o.has(d)||o.get(d)==="off");o.set(p,u?"on":m?"off":"indeterminate"),p=s.get(p)}return e&&!l&&Array.from(o.entries()).reduce((u,m)=>{let[d,y]=m;return y==="on"?[...u,d]:u},[]).length===0?_:o},in:(t,a,l)=>{let o=new Map;for(const i of t||[])o=n.select({id:i,value:!0,selected:new Map(o),children:a,parents:l});return o},out:(t,a)=>{const l=[];for(const[o,i]of t.entries())i==="on"&&!a.has(o)&&l.push(o);return l}};return n},ue=Symbol.for("vuetify:nested"),ct={id:re(),root:{register:()=>null,unregister:()=>null,parents:k(new Map),children:k(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:k(new Set),selected:k(new Map),selectedValues:k([])}},Ht=G({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),Kt=e=>{let n=!1;const t=k(new Map),a=k(new Map),l=Le(e,"opened",e.opened,r=>new Set(r),r=>[...r.values()]),o=h(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single-leaf":return Xt(e.mandatory);case"leaf":return Rt(e.mandatory);case"independent":return De(e.mandatory);case"single-independent":return ut(e.mandatory);case"classic":default:return Yt(e.mandatory)}}),i=h(()=>{if(typeof e.openStrategy=="object")return e.openStrategy;switch(e.openStrategy){case"list":return Gt;case"single":return Ut;case"multiple":default:return rt}}),s=Le(e,"selected",e.selected,r=>o.value.in(r,t.value,a.value),r=>o.value.out(r,t.value,a.value));We(()=>{n=!0});function _(r){const u=[];let m=r;for(;m!=null;)u.unshift(m),m=a.value.get(m);return u}const f=yt("nested"),p={id:re(),root:{opened:l,selected:s,selectedValues:h(()=>{const r=[];for(const[u,m]of s.value.entries())m==="on"&&r.push(u);return r}),register:(r,u,m)=>{u&&r!==u&&a.value.set(r,u),m&&t.value.set(r,[]),u!=null&&t.value.set(u,[...t.value.get(u)||[],r])},unregister:r=>{if(n)return;t.value.delete(r);const u=a.value.get(r);if(u){const m=t.value.get(u)??[];t.value.set(u,m.filter(d=>d!==r))}a.value.delete(r),l.value.delete(r)},open:(r,u,m)=>{f.emit("click:open",{id:r,value:u,path:_(r),event:m});const d=i.value.open({id:r,value:u,opened:new Set(l.value),children:t.value,parents:a.value,event:m});d&&(l.value=d)},openOnSelect:(r,u,m)=>{const d=i.value.select({id:r,value:u,selected:new Map(s.value),opened:new Set(l.value),children:t.value,parents:a.value,event:m});d&&(l.value=d)},select:(r,u,m)=>{f.emit("click:select",{id:r,value:u,path:_(r),event:m});const d=o.value.select({id:r,value:u,selected:new Map(s.value),children:t.value,parents:a.value,event:m});d&&(s.value=d),p.root.openOnSelect(r,u,m)},children:t,parents:a}};return pe(ue,p),p.root},dt=(e,n)=>{const t=fe(ue,ct),a=Symbol(ht()),l=h(()=>e.value!==void 0?e.value:a),o={...t,id:l,open:(i,s)=>t.root.open(l.value,i,s),openOnSelect:(i,s)=>t.root.openOnSelect(l.value,i,s),isOpen:h(()=>t.root.opened.value.has(l.value)),parent:h(()=>t.root.parents.value.get(l.value)),select:(i,s)=>t.root.select(l.value,i,s),isSelected:h(()=>t.root.selected.value.get(ee(l.value))==="on"),isIndeterminate:h(()=>t.root.selected.value.get(l.value)==="indeterminate"),isLeaf:h(()=>!t.root.children.value.get(l.value)),isGroupActivator:t.isGroupActivator};return!t.isGroupActivator&&t.root.register(l.value,t.id.value,n),We(()=>{!t.isGroupActivator&&t.root.unregister(l.value)}),n&&pe(ue,o),o},qt=()=>{const e=fe(ue,ct);pe(ue,{...e,isGroupActivator:!0})},zt=kt({name:"VListGroupActivator",setup(e,n){let{slots:t}=n;return qt(),()=>{var a;return(a=t.default)==null?void 0:a.call(t)}}}),Zt=G({activeColor:String,baseColor:String,color:String,collapseIcon:{type:Z,default:"$collapse"},expandIcon:{type:Z,default:"$expand"},prependIcon:Z,appendIcon:Z,fluid:Boolean,subgroup:Boolean,title:String,value:null,...ce(),...ge()},"VListGroup"),Ne=te()({name:"VListGroup",props:Zt(),setup(e,n){let{slots:t}=n;const{isOpen:a,open:l,id:o}=dt(x(e,"value"),!0),i=h(()=>`v-list-group--id-${String(o.value)}`),s=it(),{isBooted:_}=jt();function f(m){l(!a.value,m)}const p=h(()=>({onClick:f,class:"v-list-group__header",id:i.value})),r=h(()=>a.value?e.collapseIcon:e.expandIcon),u=h(()=>({VListItem:{active:a.value,activeColor:e.activeColor,baseColor:e.baseColor,color:e.color,prependIcon:e.prependIcon||e.subgroup&&r.value,appendIcon:e.appendIcon||!e.subgroup&&r.value,title:e.title,value:e.value}}));return de(()=>g(e.tag,{class:["v-list-group",{"v-list-group--prepend":s==null?void 0:s.hasPrepend.value,"v-list-group--fluid":e.fluid,"v-list-group--subgroup":e.subgroup,"v-list-group--open":a.value},e.class],style:e.style},{default:()=>[t.activator&&g(be,{defaults:u.value},{default:()=>[g(zt,null,{default:()=>[t.activator({props:p.value,isOpen:a.value})]})]}),g($t,{transition:{component:Nt},disabled:!_.value},{default:()=>{var m;return[Ve(g("div",{class:"v-list-group__items",role:"group","aria-labelledby":i.value},[(m=t.default)==null?void 0:m.call(t)]),[[je,a.value]])]}})]})),{}}});const Jt=Xe("v-list-item-subtitle"),vt=Xe("v-list-item-title"),Qt=G({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:Z,baseColor:String,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:Z,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:Me(),onClickOnce:Me(),...qe(),...ce(),...Ye(),...ze(),...Ze(),...Je(),...Lt(),...ge(),...Ie(),...He({variant:"text"})},"VListItem"),xe=te()({name:"VListItem",directives:{Ripple:Mt},props:Qt(),emits:{click:e=>!0},setup(e,n){let{attrs:t,slots:a,emit:l}=n;const o=Et(e,t),i=h(()=>e.value===void 0?o.href.value:e.value),{select:s,isSelected:_,isIndeterminate:f,isGroupActivator:p,root:r,parent:u,openOnSelect:m}=dt(i,!1),d=it(),y=h(()=>{var c;return e.active!==!1&&(e.active||((c=o.isActive)==null?void 0:c.value)||_.value)}),T=h(()=>e.link!==!1&&o.isLink.value),L=h(()=>!e.disabled&&e.link!==!1&&(e.link||o.isClickable.value||e.value!=null&&!!d)),U=h(()=>e.rounded||e.nav),N=h(()=>e.color??e.activeColor),ne=h(()=>({color:y.value?N.value??e.baseColor:e.baseColor,variant:e.variant}));_t(()=>{var c;return(c=o.isActive)==null?void 0:c.value},c=>{c&&u.value!=null&&r.open(u.value,!0),c&&m(c)},{immediate:!0});const{themeClasses:ae}=Pe(e),{borderClasses:le}=Qe(e),{colorClasses:q,colorStyles:M,variantClasses:b}=Ot(ne),{densityClasses:X}=Ke(e),{dimensionStyles:ye}=et(e),{elevationClasses:he}=tt(e),{roundedClasses:ke}=nt(U),_e=h(()=>e.lines?`v-list-item--${e.lines}-line`:void 0),z=h(()=>({isActive:y.value,select:s,isSelected:_.value,isIndeterminate:f.value}));function oe(c){var S;l("click",c),!(p||!L.value)&&((S=o.navigate)==null||S.call(o,c),e.value!=null&&s(!_.value,c))}function v(c){(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),oe(c))}return de(()=>{const c=T.value?"a":e.tag,S=a.title||e.title!=null,W=a.subtitle||e.subtitle!=null,w=!!(e.appendAvatar||e.appendIcon),P=!!(w||a.append),B=!!(e.prependAvatar||e.prependIcon),we=!!(B||a.prepend);return d==null||d.updateHasPrepend(we),e.activeColor&&wt("active-color",["color","base-color"]),Ve(g(c,{class:["v-list-item",{"v-list-item--active":y.value,"v-list-item--disabled":e.disabled,"v-list-item--link":L.value,"v-list-item--nav":e.nav,"v-list-item--prepend":!we&&(d==null?void 0:d.hasPrepend.value),"v-list-item--slim":e.slim,[`${e.activeClass}`]:e.activeClass&&y.value},ae.value,le.value,q.value,X.value,he.value,_e.value,ke.value,b.value,e.class],style:[M.value,ye.value,e.style],href:o.href.value,tabindex:L.value?d?-2:0:void 0,onClick:oe,onKeydown:L.value&&!T.value&&v},{default:()=>{var Te;return[Bt(L.value||y.value,"v-list-item"),we&&g("div",{key:"prepend",class:"v-list-item__prepend"},[a.prepend?g(be,{key:"prepend-defaults",disabled:!B,defaults:{VAvatar:{density:e.density,image:e.prependAvatar},VIcon:{density:e.density,icon:e.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var E;return[(E=a.prepend)==null?void 0:E.call(a,z.value)]}}):g(Q,null,[e.prependAvatar&&g(Be,{key:"prepend-avatar",density:e.density,image:e.prependAvatar},null),e.prependIcon&&g($e,{key:"prepend-icon",density:e.density,icon:e.prependIcon},null)]),g("div",{class:"v-list-item__spacer"},null)]),g("div",{class:"v-list-item__content","data-no-activator":""},[S&&g(vt,{key:"title"},{default:()=>{var E;return[((E=a.title)==null?void 0:E.call(a,{title:e.title}))??e.title]}}),W&&g(Jt,{key:"subtitle"},{default:()=>{var E;return[((E=a.subtitle)==null?void 0:E.call(a,{subtitle:e.subtitle}))??e.subtitle]}}),(Te=a.default)==null?void 0:Te.call(a,z.value)]),P&&g("div",{key:"append",class:"v-list-item__append"},[a.append?g(be,{key:"append-defaults",disabled:!w,defaults:{VAvatar:{density:e.density,image:e.appendAvatar},VIcon:{density:e.density,icon:e.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var E;return[(E=a.append)==null?void 0:E.call(a,z.value)]}}):g(Q,null,[e.appendIcon&&g($e,{key:"append-icon",density:e.density,icon:e.appendIcon},null),e.appendAvatar&&g(Be,{key:"append-avatar",density:e.density,image:e.appendAvatar},null)]),g("div",{class:"v-list-item__spacer"},null)])]}}),[[Ct("ripple"),L.value&&e.ripple]])}),{}}}),en=G({color:String,inset:Boolean,sticky:Boolean,title:String,...ce(),...ge()},"VListSubheader"),tn=te()({name:"VListSubheader",props:en(),setup(e,n){let{slots:t}=n;const{textColorClasses:a,textColorStyles:l}=at(x(e,"color"));return de(()=>{const o=!!(t.default||e.title);return g(e.tag,{class:["v-list-subheader",{"v-list-subheader--inset":e.inset,"v-list-subheader--sticky":e.sticky},a.value,e.class],style:[{textColorStyles:l},e.style]},{default:()=>{var i;return[o&&g("div",{class:"v-list-subheader__text"},[((i=t.default)==null?void 0:i.call(t))??e.title])]}})}),{}}});const nn=G({color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...ce(),...Ie()},"VDivider"),an=te()({name:"VDivider",props:nn(),setup(e,n){let{attrs:t}=n;const{themeClasses:a}=Pe(e),{textColorClasses:l,textColorStyles:o}=at(x(e,"color")),i=h(()=>{const s={};return e.length&&(s[e.vertical?"maxHeight":"maxWidth"]=Ee(e.length)),e.thickness&&(s[e.vertical?"borderRightWidth":"borderTopWidth"]=Ee(e.thickness)),s});return de(()=>g("hr",{class:[{"v-divider":!0,"v-divider--inset":e.inset,"v-divider--vertical":e.vertical},a.value,l.value,e.class],style:[i.value,o.value,e.style],"aria-orientation":!t.role||t.role==="separator"?e.vertical?"vertical":"horizontal":void 0,role:`${t.role||"separator"}`},null)),{}}}),ln=G({items:Array,returnObject:Boolean},"VListChildren"),mt=te()({name:"VListChildren",props:ln(),setup(e,n){let{slots:t}=n;return st(),()=>{var a,l;return((a=t.default)==null?void 0:a.call(t))??((l=e.items)==null?void 0:l.map(o=>{var u,m;let{children:i,props:s,type:_,raw:f}=o;if(_==="divider")return((u=t.divider)==null?void 0:u.call(t,{props:s}))??g(an,s,null);if(_==="subheader")return((m=t.subheader)==null?void 0:m.call(t,{props:s}))??g(tn,s,null);const p={subtitle:t.subtitle?d=>{var y;return(y=t.subtitle)==null?void 0:y.call(t,{...d,item:f})}:void 0,prepend:t.prepend?d=>{var y;return(y=t.prepend)==null?void 0:y.call(t,{...d,item:f})}:void 0,append:t.append?d=>{var y;return(y=t.append)==null?void 0:y.call(t,{...d,item:f})}:void 0,title:t.title?d=>{var y;return(y=t.title)==null?void 0:y.call(t,{...d,item:f})}:void 0},r=Ne.filterProps(s);return i?g(Ne,Oe({value:s==null?void 0:s.value},r),{activator:d=>{let{props:y}=d;const T={...s,...y,value:e.returnObject?f:s.value};return t.header?t.header({props:T}):g(xe,T,p)},default:()=>g(mt,{items:i},t)}):t.item?t.item({props:s}):g(xe,Oe(s,{value:e.returnObject?f:s.value}),p)}))}}}),on=G({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:bt}},"list-items");function sn(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function rn(e,n){const t=se(n,e.itemType,"item"),a=sn(n)?n:se(n,e.itemTitle),l=se(n,e.itemValue,void 0),o=se(n,e.itemChildren),i=e.itemProps===!0?Vt(n,["children"]):se(n,e.itemProps),s={title:a,value:l,...i};return{type:t,title:s.title,value:s.value,props:s,children:t==="item"&&o?ft(e,o):void 0,raw:n}}function ft(e,n){const t=[];for(const a of n)t.push(rn(e,a));return t}function un(e){return{items:h(()=>ft(e,e.items))}}const cn=G({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,...Ht({selectStrategy:"single-leaf",openStrategy:"list"}),...qe(),...ce(),...Ye(),...ze(),...Ze(),itemType:{type:String,default:"type"},...on(),...Je(),...ge(),...Ie(),...He({variant:"text"})},"VList"),dn=te()({name:"VList",props:cn(),emits:{"update:selected":e=>!0,"update:opened":e=>!0,"click:open":e=>!0,"click:select":e=>!0},setup(e,n){let{slots:t}=n;const{items:a}=un(e),{themeClasses:l}=Pe(e),{backgroundColorClasses:o,backgroundColorStyles:i}=Wt(x(e,"bgColor")),{borderClasses:s}=Qe(e),{densityClasses:_}=Ke(e),{dimensionStyles:f}=et(e),{elevationClasses:p}=tt(e),{roundedClasses:r}=nt(e),{open:u,select:m}=Kt(e),d=h(()=>e.lines?`v-list--${e.lines}-line`:void 0),y=x(e,"activeColor"),T=x(e,"baseColor"),L=x(e,"color");st(),St({VListGroup:{activeColor:y,baseColor:T,color:L},VListItem:{activeClass:x(e,"activeClass"),activeColor:y,baseColor:T,color:L,density:x(e,"density"),disabled:x(e,"disabled"),lines:x(e,"lines"),nav:x(e,"nav"),slim:x(e,"slim"),variant:x(e,"variant")}});const U=re(!1),N=k();function ne(b){U.value=!0}function ae(b){U.value=!1}function le(b){var X;!U.value&&!(b.relatedTarget&&((X=N.value)!=null&&X.contains(b.relatedTarget)))&&M()}function q(b){if(N.value){if(b.key==="ArrowDown")M("next");else if(b.key==="ArrowUp")M("prev");else if(b.key==="Home")M("first");else if(b.key==="End")M("last");else return;b.preventDefault()}}function M(b){if(N.value)return xt(N.value,b)}return de(()=>g(e.tag,{ref:N,class:["v-list",{"v-list--disabled":e.disabled,"v-list--nav":e.nav},l.value,o.value,s.value,_.value,p.value,d.value,r.value,e.class],style:[i.value,f.value,e.style],tabindex:e.disabled||U.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:ne,onFocusout:ae,onFocus:le,onKeydown:q},{default:()=>[g(mt,{items:a.value,returnObject:e.returnObject},t)]})),{open:u,select:m,focus:M}}}),vn=R({__name:"ContextMenu",props:{menu:{}},setup(e,{expose:n}){const t=k(!1),a=k(0),l=k(0),o=k(),i=k(null),s=e,_=u=>{i.value.focus(),t.value=!1,setTimeout(s.menu[u].action,0),p()},f=u=>{u.preventDefault(),a.value=u.clientX,l.value=u.clientY,t.value=!0,o.value.tabIndex=-1,setTimeout(()=>o.value.focus(),0)},p=()=>{i.value.focus()},r=h(()=>t);return n({show:f,isShowing:r}),(u,m)=>Ve((C(),j("div",{ref_key:"contextMenuDiv",ref:o,style:Dt([{position:"absolute"},{left:a.value+"px",top:l.value+"px"}]),onFocus:m[0]||(m[0]=d=>i.value=d.relatedTarget),onKeydown:m[1]||(m[1]=Fe(d=>{t.value=!1,p()},["escape"]))},[g(dn,{id:"list"},{default:K(()=>[(C(!0),j(Q,null,ve(s.menu,(d,y)=>(C(),F(xe,{key:y,onClick:T=>_(y)},{default:K(()=>[g(vt,null,{default:K(()=>[It(Pt(d.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})],36)),[[je,t.value]])}});const Ae=(e,n)=>{const t=e.__vccOpts||e;for(const[a,l]of n)t[a]=l;return t},mn=Ae(vn,[["__scopeId","data-v-21b2160f"]]),O=50,fn=R({__name:"ComponentMachine",props:{modelValue:{required:!0},modelModifiers:{}},emits:Ue(["selected","unselected"],["update:modelValue"]),setup(e,{expose:n,emit:t}){const a=Ge(e,"modelValue"),l=h(()=>({x:a.value.x,y:a.value.y,width:O,height:O,draggable:!0})),o=me(h(()=>a.value.x+O/2)),i=me(h(()=>a.value.y+O/2)),s=f=>{a.value.x=f.target.x(),a.value.y=f.target.y()};return n({getConnectionPos:(f,p)=>[o.value,i.value],centerX:o,centerY:i,model:a}),(f,p)=>{const r=$("v-rect"),u=$("v-text"),m=$("v-circle"),d=$("v-group");return C(),F(d,{config:l.value,onMouseenter:p[0]||(p[0]=y=>f.$emit("selected")),onMouseleave:p[1]||(p[1]=y=>f.$emit("unselected")),onDragmove:s},{default:K(()=>[g(r,{config:{width:O,height:O,fill:"black"}},null,8,["config"]),g(u,{config:{x:0,y:O+10,width:O,text:a.value.refdata.name,align:"center"}},null,8,["config"]),a.value.highlighted?(C(),F(m,{key:0,config:{x:O/2,y:O/2,radius:O/1.5,stroke:"#00000",opacity:.5,strokeWidth:3}},null,8,["config"])):Re("",!0)]),_:1},8,["config"])}}}),A=50,pn=R({__name:"ComponentNetwork",props:{modelValue:{required:!0},modelModifiers:{}},emits:Ue(["selected","unselected"],["update:modelValue"]),setup(e,{expose:n,emit:t}){const a=Ge(e,"modelValue"),l=h(()=>({x:a.value.x,y:a.value.y,width:A,height:A,draggable:!0})),o=me(h(()=>a.value.x+A/2)),i=me(h(()=>a.value.y+A/2)),s=f=>{a.value.x=f.target.x(),a.value.y=f.target.y()};return n({getConnectionPos:(f,p)=>{const r=f-a.value.x,u=p-a.value.y,m=Math.sqrt(r*r+u*u),d=A/2;return[o.value+r/m*d,i.value+u/m*d]},centerX:o,centerY:i,model:a}),(f,p)=>{const r=$("v-circle"),u=$("v-text"),m=$("v-group");return C(),F(m,{config:l.value,onMouseenter:p[0]||(p[0]=d=>f.$emit("selected")),onMouseleave:p[1]||(p[1]=d=>f.$emit("unselected")),onDragmove:s},{default:K(()=>[g(r,{config:{x:A/2,y:A/2,radius:A/2,stroke:"black",strokeWidth:3}},null,8,["config"]),g(u,{config:{x:-50+A/2,y:A+10,width:100,text:a.value.refdata.name,align:"center"}},null,8,["config"]),a.value.highlighted?(C(),F(r,{key:0,config:{x:A/2,y:A/2,radius:A/1.5,stroke:"#00000",opacity:.5,strokeWidth:3}},null,8,["config"])):Re("",!0)]),_:1},8,["config"])}}}),gn=R({__name:"ComponentNetworkEdge",props:{machine:{},network:{},mouseX:{},mouseY:{}},setup(e){const n=e,t=h(()=>{const a=n.mouseX,l=n.mouseY,o=n.machine?[n.machine.centerX,n.machine.centerY]:[a,l],i=n.network?[n.network.centerX,n.network.centerY]:[a,l];return[...n.machine?n.machine.getConnectionPos(i[0],i[1]):[a,l],...n.network?n.network.getConnectionPos(o[0],o[1]):[a,l]]});return(a,l)=>{const o=$("v-line");return C(),F(o,{config:{x:0,y:0,stroke:"black",strokeWidth:3,points:t.value,tension:1}},null,8,["config"])}}}),yn=R({__name:"WorkspaceView",setup(e){var z,oe;const n=k(),t=k(),a=k(Array()),l=k(Array()),o=k(Array()),i=k(1),s=k(),_=new Map,f=k(new Array),p=k(new Array),r=k(new Array),u=k(),m=k(0),d=k(0),y=k({width:(z=n.value)==null?void 0:z.clientWidth,height:(oe=n.value)==null?void 0:oe.clientHeight});At(()=>{_e();const v=new ResizeObserver(()=>{var c,S;y.value.height=(c=n.value)==null?void 0:c.clientHeight,y.value.width=(S=n.value)==null?void 0:S.clientWidth});n.value&&v.observe(n.value)});function T(v){const c=_.get(v)??1;return _.set(v,c+1),c}const L=v=>{v.preventDefault()},U=v=>{var S;v.preventDefault();const c=(S=v.dataTransfer)==null?void 0:S.getData("text/plain");if(c)if(c=="NETWORK")H.create("192.168."+i.value+".0/24","Network "+i.value).then(W=>{W.x=v.clientX-25,W.y=v.clientY-25,p.value.push(k(W)),i.value++});else{const W=Ft.WEB;Y.create(W,"WEB Server "+T("WEB")).then(w=>{w.x=v.clientX-25,w.y=v.clientY-25,f.value.push(k(w))})}},N=v=>{var c;v.preventDefault(),s.value!=null&&((c=t.value)==null||c.show(v))},ne=v=>{m.value=v.offsetX,d.value=v.offsetY},ae=()=>{if(s.value){u.value&&X();const v=k(new ot);s.value instanceof Y?v.value.machineId=s.value.refdata.id:s.value instanceof H&&(v.value.networkId=s.value.refdata.id),r.value.push(v),u.value=v.value,s.value.highlighted=!1,s.value=void 0}},le=()=>{s.value&&(s.value instanceof Y?(f.value=f.value.filter(v=>{var c;return v.value.refdata.id!=((c=s.value)==null?void 0:c.refdata.id)}),r.value=r.value.filter(v=>{var c;return v.value.machineId!=((c=s.value)==null?void 0:c.refdata.id)}),s.value.destroy()):s.value instanceof H&&(p.value=p.value.filter(v=>{var c;return v.value.refdata.id!=((c=s.value)==null?void 0:c.refdata.id)}),r.value=r.value.filter(v=>{var c;return v.value.networkId!=((c=s.value)==null?void 0:c.refdata.id)}),s.value.destroy()))},q=v=>{t.value==null||t.value.isShowing.value||(s.value=v,s.value.highlighted=!0)},M=v=>{t.value==null||t.value.isShowing.value||(v.highlighted=!1,s.value=void 0)},b=v=>{v.button==0&&u.value&&s.value&&(u.value.machineId&&s.value instanceof H?(u.value.networkId=s.value.refdata.id,u.value=void 0):u.value.networkId&&s.value instanceof Y&&(u.value.machineId=s.value.refdata.id,u.value=void 0))},X=()=>{u.value&&(r.value=r.value.filter(v=>{var c,S;return v.value.machineId!=((c=u.value)==null?void 0:c.machineId)||v.value.networkId!=((S=u.value)==null?void 0:S.networkId)}),u.value=void 0)},ye=v=>a.value.find(c=>c.model.refdata.id==v),he=v=>l.value.find(c=>c.model.refdata.id==v),ke=Tt([{label:"ネットワークを接続",action:ae},{label:"削除",action:le}]),_e=()=>{var v;(v=n.value)==null||v.focus()};return(v,c)=>{const S=$("v-layer"),W=$("v-stage");return C(),j("div",{id:"workspace-view",ref_key:"view",ref:n,tabindex:"1",onDragover:L,onDrop:U,onKeydown:Fe(X,["escape"])},[g(W,{config:y.value,onContextmenu:c[0]||(c[0]=w=>N(w.evt)),onMousemove:c[1]||(c[1]=w=>ne(w.evt)),onClick:c[2]||(c[2]=w=>b(w.evt))},{default:K(()=>[g(S,{ref:"layer"},{default:K(()=>[(C(!0),j(Q,null,ve(r.value,(w,P)=>(C(),F(gn,{key:P,ref_for:!0,ref_key:"networkEdgeComponents",ref:o,network:he(w.value.networkId),machine:ye(w.value.machineId),"mouse-x":m.value,"mouse-y":d.value},null,8,["network","machine","mouse-x","mouse-y"]))),128)),(C(!0),j(Q,null,ve(f.value,(w,P)=>(C(),F(fn,{key:w.value.refdata.id,ref_for:!0,ref_key:"machineComponents",ref:a,modelValue:f.value[P].value,"onUpdate:modelValue":B=>f.value[P].value=B,onSelected:B=>q(f.value[P].value),onUnselected:B=>M(f.value[P].value)},null,8,["modelValue","onUpdate:modelValue","onSelected","onUnselected"]))),128)),(C(!0),j(Q,null,ve(p.value,(w,P)=>(C(),F(pn,{key:w.value.refdata.id,ref_for:!0,ref_key:"networkComponents",ref:l,modelValue:p.value[P].value,"onUpdate:modelValue":B=>p.value[P].value=B,onSelected:B=>q(p.value[P].value),onUnselected:B=>M(p.value[P].value)},null,8,["modelValue","onUpdate:modelValue","onSelected","onUnselected"]))),128))]),_:1},512)]),_:1},8,["config"]),g(mn,{ref_key:"contextMenu",ref:t,menu:ke},null,8,["menu"])],544)}}});const hn={id:"tab"},kn=R({__name:"WorkspaceComponentsTab",setup(e){const n=a=>{var i;const l=a.target,o=l==null?void 0:l.dataset.type;o&&l&&((i=a.dataTransfer)==null||i.setData("text/plain",o),l.style.opacity="0.5")},t=a=>{const l=a.target;l&&(l.style.opacity="1.0")};return(a,l)=>(C(),j("div",hn,[J("div",{id:"server",draggable:"true","data-type":"HTML",onDragstart:n,onDragend:t},null,32),J("div",{id:"server",draggable:"true","data-type":"DNS",onDragstart:n,onDragend:t},null,32),J("div",{id:"server",draggable:"true","data-type":"FILE",onDragstart:n,onDragend:t},null,32),J("div",{id:"network",draggable:"true","data-type":"NETWORK",onDragstart:n,onDragend:t},null,32)]))}});const _n=Ae(kn,[["__scopeId","data-v-e670e784"]]),wn={id:"editor"},Cn=R({__name:"WorkspaceEditor",setup(e){return(n,t)=>(C(),j("div",wn,[J("div",null,[g(yn)]),J("div",null,[g(_n)])]))}});const bn=Ae(Cn,[["__scopeId","data-v-d01891c0"]]),Sn={id:"workspace"},An=R({__name:"Workspace",setup(e){return(n,t)=>(C(),j("div",Sn,[g(bn)]))}});export{An as default};
